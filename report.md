# 第六次作业

### 自动化少61 何奈特 2140506114

注：点击文中的[链接]()查看代码文件
报告中原始未压缩图片较多，加载时间会比较长

---

> 这次作业给了几张PNG和JPG格式的图片，其不是位图，实在是超出我的能力范围，不得不先转成256色位图（使用Adobe Photoshop）。

> 此前几次作业写的BMP类有一个隐藏的问题，在此次的用例中暴露了出来。

旧版的（在BMP256(const char*)、void writeFile(int, int, const char*)等函数中出现）：
```
int dataSizePerLine = ((width + 7) / 8) * 8;
```

这一步是由于每行数据都要8Byte对齐，然而BMP文件应该是4Byte对齐，前几次的用例都是512*512这样的整数，或者133*134这样的凑巧对齐到8的倍数，这个错误一直隐藏着没有发现，在此次的多个用例中才浮现出来（如test4是739*466），体现为读写文件数据有误，出现诡异的黑色斜线。

应改为：
```
int dataSizePerLine = ((width + 3) / 4) * 4;
```

> 